[supervisord]
nodaemon=true
user=www-data
logfile=/var/log/supervisor/supervisord.log
pidfile=/tmp/supervisord.pid
childlogdir=/var/log/supervisor

[program:nginx]
command=nginx -g 'daemon off;'
user=www-data
stdout_logfile=/var/log/supervisor/nginx.log
stderr_logfile=/var/log/supervisor/nginx.log
autorestart=true
priority=10

[program:backup-app]
command=uvicorn app:app --host 0.0.0.0 --port 8080
directory=/app
user=www-data
stdout_logfile=/var/log/supervisor/backup-app.log
stderr_logfile=/var/log/supervisor/backup-app.log
autorestart=true
priority=20
environment=CONFIG_PATH="/config/local/local.yaml"
